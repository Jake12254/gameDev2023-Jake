<!DOCTYPE html>
<html>
<head>
	<title>T4A06 Bullet by Fred</title>
	<style>
		body {
			background-repeat: repeat;
			background-size: 80%;
		}
	</style>
</head>
<body id="myBody" background="myBackground01.jpg" onkeydown="{
	document.all.myText01.value = event.key;

	if (event.key == 'd') {
		// d = go right
		document.getElementById('myImg01').style.left = parseInt(document.getElementById('myImg01').style.left) + 10 + 'px';
	}   

	if (event.key == 's') {
		// s = go down
		document.getElementById('myImg01').style.top = parseInt(document.getElementById('myImg01').style.top) + 10 + 'px';
	}  

	myCheckHit(); // checks for all collisions
}">
	<h1 align=center><font color=Yellow>T4A06 Bullet by Fred</font></h1>
	<input id="myText01" type=text value="" size=50 placeholder="Feedback here"><br>
	<input type=button value="Auto Background Left" onclick="{
		clearInterval(myClock);
		let myTemp = '100px 0px';
		myClock = setInterval(function(){
			myGlobalX -= 5;
			myTemp =  myGlobalX + 'px 0px';
			document.getElementById('myBody').style.backgroundPosition = myTemp;
		}, 100);
	}">
	<input type=button value="Right" onclick="{
		document.getElementById('myImg01').style.left = parseInt(document.getElementById('myImg01').style.left) + 10 + 'px';
		myCheckHit(); // checks for all collisions
	}">
	<input type=button value="Down" onclick="{
		document.getElementById('myImg01').style.top = parseInt(document.getElementById('myImg01').style.top) + 10 + 'px';
		myCheckHit(); // checks for all collisions
	}">
	<input type=button value="shoot" onclick="{
		if (myShooting > 2) {
			myShooting = 1;
		}

		// Bullet Number 2
		if (myShooting == 2) {
			myShooting += 1;
			document.getElementById('myBullet02').style.left = document.getElementById('myImg01').style.left;
			document.getElementById('myBullet02').style.top = document.getElementById('myImg01').style.top;
			myGun02 = setInterval(function(){
				document.getElementById('myBullet02').style.left = parseInt(document.getElementById('myBullet02').style.left) + 10 + 'px';
				myCheckHit(); // checks for all collisions
				if (parseInt(document.getElementById('myBullet02').style.left) >= window.innerWidth) {
					clearInterval(myGun02);
					document.getElementById('myBullet02').style.left = '-200px';
				}
			}, 50);
		}
		
		// Bullet Number 1
		else {
			myShooting += 1;
			document.getElementById('myBullet01').style.left = document.getElementById('myImg01').style.left;
			document.getElementById('myBullet01').style.top = document.getElementById('myImg01').style.top;
			myGun01 = setInterval(function(){
				document.getElementById('myBullet01').style.left = parseInt(document.getElementById('myBullet01').style.left) + 10 + 'px';
				myCheckHit(); // checks for all collisions
			
			if (parseInt(document.getElementById('myBullet01').style.left) >= window.innerWidth) {
				clearInterval(myGun01);
				document.getElementById('myBullet01').style.left = '-200px';
			}
		}, 50);
	}
}">
<div>
	<img id="myImg01" src="myShip01.png" style="position:absolute; top:250px; left:0px;">
	<img id="myBullet01" src="myBullet01.png" style="position:absolute; top:265px; left:-200px;">
	<img id="myBullet02" src="myBullet02.png" style="position:absolute; top:285px; left:-200px;">
</div>
<script>
	var myClock;
	var myGlobalX = 0;

	function myCheckHit() {
		if (myIsOverlap(document.getElementById('myImg01'), document.getElementById('myObstacle01'))) {
			alert('You hit Obstacle 01');
		}

		if (myIsOverlap(document.getElementById('myBullet01'), document.getElementById('myObstacle01'))) {
			clearInterval(myGun01);
			document.getElementById('myBullet01').style.left = '-200px';
			alert('You hit Obstacle 01 with Bullet 01');
		}

		if (myIsOverlap(document.getElementById('myBullet02'), document.getElementById('myObstacle01'))) {
			clearInterval(myGun02);
			document.getElementById('myBullet02').style.left = '-200px';
			alert('You hit Obstacle 01 with Bullet 02');
		}

		if (myIsOverlap(document.getElementById('myBullet01'), document.getElementById('myObstacle02'))) {
			clearInterval(myGun01);
			document.getElementById('myBullet01').style.left = '-200px';
			alert('You hit Obstacle 02 with Bullet 01');
		}

		if (myIsOverlap(document.getElementById('myBullet02'), document.getElementById('myObstacle02'))) {
			clearInterval(myGun02);
			document.getElementById('myBullet02').style.left = '-200px';
			alert('You hit Obstacle 02 with Bullet 02');
		}
	}

	function myIsOverlap(obj01, obj02) {
		var obj01Left = parseInt(obj01.style.left);
		var obj01Top = parseInt(obj01.style.top);
		var obj01Right = obj01Left + parseInt(obj01.width);
		var obj01Bottom = obj01Top + parseInt(obj01.height);

		var obj02Left = parseInt(obj02.style.left);
		var obj02Top = parseInt(obj02.style.top);
		var obj02Right = obj02Left + parseInt(obj02.width);
		var obj02Bottom = obj02Top + parseInt(obj02.height);

		if (obj01Left < obj02Right && obj01Right > obj02Left && obj01Top < obj02Bottom && obj01Bottom > obj02Top) {
			return true;
		} else {
			return false;
		}
	}

	document.onkeydown = function(event) {
		if (event.keyCode == 32) {
			myCheckHit(); // checks for all collisions
		}
	};
</script>
<img id="myObstacle01" src="myObstacle01.png" style="position:absolute; top:250px; left:800px;">
<img id="myObstacle02" src="myObstacle02.png" style="position:absolute; top:400px; left:600px;">
