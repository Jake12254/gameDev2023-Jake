<!DOCTYPE html>
<html>
  <head>
    <title>Two Player Tank Combat Game</title>
    <script>

      // global variables here

      let myGlobalX = 0;
      let myClock;
      let player1Score = 10;
      let player2Score = 10;
      let player1Gun;
      let player2Gun;
      let player1Shooting = 1;
      let player2Shooting = 1;

      // global functions here

      function hitOther(object1, object2) {
        const left1 = parseInt(document.getElementById(object1).style.left);
        const right1 = left1 + parseInt(document.getElementById(object1).style.width);
        const top1 = parseInt(document.getElementById(object1).style.top);
        const bottom1 = top1 + parseInt(document.getElementById(object1).style.height);
        const left2 = parseInt(document.getElementById(object2).style.left);
        const right2 = left2 + parseInt(document.getElementById(object2).style.width);
        const top2 = parseInt(document.getElementById(object2).style.top);
        const bottom2 = top2 + parseInt(document.getElementById(object2).style.height);
        if (right1 >= left2 && bottom1 >= top2 && left1 <= right2 && top1 <= bottom2) {
          return true;
        }
      }

      function checkHit() {
        // Player 1
        document.getElementById('player1Score').innerHTML = player1Score; // show the present score
        if (hitOther('player1Tank', 'player2Tank')) {
          document.getElementById('player1Tank').style.left = '20px';
          player1Score -= 1;
          document.getElementById('player1Score').innerHTML = player1Score;
        }
        if (hitOther('player1Tank', 'player2Bullet')) {
          clearInterval(player2Gun);
          document.getElementById('player2Bullet').style.left = '-200px';
          player1Score += 1;
          document.getElementById('player1Score').innerHTML = player1Score;
        }
        // Player 2
        document.getElementById('player2Score').innerHTML = player2Score; // show the present score
        if (hitOther('player2Tank', 'player1Tank')) {
          document.getElementById('player2Tank').style.left = '560px';
          player2Score -= 1;
          document.getElementById('player2Score').innerHTML = player2Score;
        }
        if (hitOther('player2Tank', 'player1Bullet')) {
          clearInterval(player1Gun);
          document.getElementById('player1Bullet').style.left = '-200px';
          player2Score += 1;
          document.getElementById('player2Score').innerHTML = player2Score;
        }
      }

      function player1Shoot() {
        if (player1Shooting > 2) {
          player1Shooting = 1;
        }
        // Bullet Number 2
        if (player1Shooting == 2) {
          player1Shooting += 1;
          document.getElementById('player1Bullet2').style.left = document.getElementById('player1Tank').style.left;
          document.getElementById('player1Bullet2').style.top = parseInt(document.getElementById('player1Tank').style.top) + 30 + 'px';
          player1Gun = setInterval(function () {
            document.getElementById('player1Bullet2').style.left = parseInt(document.getElementById('player1Bullet2').style.left) + 10 + 'px';
            checkHit();
          }, 50);
        }
        // Bullet Number 1
    else {
      player2Shooting += 1;
      document.getElementById('player2Bullet1').style.left = document.getElementById('player2Tank').style.left;
      document.getElementById('player2Bullet1').style.top = parseInt(document.getElementById('player2Tank').style.top) + 30 + 'px';
      player2Gun = setInterval(function () {
        document.getElementById('player2Bullet1').style.left = parseInt(document.getElementById('player2Bullet1').style.left) - 10 + 'px';
        checkHit();
      }, 50);
    }
  }

  function moveUp(element) {
    const y = parseInt(document.getElementById(element).style.top);
    if (y > 0) {
      document.getElementById(element).style.top = y - 10 + 'px';
    }
  }

  function moveDown(element) {
    const y = parseInt(document.getElementById(element).style.top);
    if (y < 360) {
      document.getElementById(element).style.top = y + 10 + 'px';
    }
  }

  function moveLeft(element) {
    const x = parseInt(document.getElementById(element).style.left);
    if (x > 0) {
      document.getElementById(element).style.left = x - 10 + 'px';
    }
  }

  function moveRight(element) {
    const x = parseInt(document.getElementById(element).style.left);
    if (x < 540) {
      document.getElementById(element).style.left = x + 10 + 'px';
    }
  }

  function start() {
    // create the tanks
    document.getElementById('player1Tank').style.left = '20px';
    document.getElementById('player1Tank').style.top = '50px';
    document.getElementById('player2Tank').style.left = '560px';
    document.getElementById('player2Tank').style.top = '50px';
    // set the key press event listener
    document.addEventListener('keydown', function (event) {
      if (event.code === 'KeyW') {
        moveUp('player1Tank');
      } else if (event.code === 'KeyS') {
        moveDown('player1Tank');
      } else if (event.code === 'KeyA') {
        moveLeft('player1Tank');
      } else if (event.code === 'KeyD') {
moveRight('player1Tank');
} else if (event.code === 'KeyF') {
player1Shoot();
} else if (event.code === 'ArrowUp') {
moveUp('player2Tank');
} else if (event.code === 'ArrowDown') {
moveDown('player2Tank');
} else if (event.code === 'ArrowLeft') {
moveLeft('player2Tank');
} else if (event.code === 'ArrowRight') {
moveRight('player2Tank');
} else if (event.code === 'ControlRight') {
player2Shoot();
}
});
// set the timer to update the screen
myClock = setInterval(function () {
player1Shooting += 1;
// move the player1Bullet1
document.getElementById('player1Bullet1').style.left = parseInt(document.getElementById('player1Bullet1').style.left) + 10 + 'px';
if (parseInt(document.getElementById('player1Bullet1').style.left) > 600) {
clearInterval(player1Gun);
document.getElementById('player1Bullet1').style.left = '-200px';
}
// move the player2Bullet1
document.getElementById('player2Bullet1').style.left = parseInt(document.getElementById('player2Bullet1').style.left) - 10 + 'px';
if (parseInt(document.getElementById('player2Bullet1').style.left) < -50) {
clearInterval(player2Gun);
document.getElementById('player2Bullet1').style.left = '-200px';
}
}, 100);
}

</script>
  </head>
  <body onload="start()">
    <h1>Two Player Tank Combat Game</h1>
    <div id="game">
      <div id="player1Tank"></div>
      <div id="player1Bullet1"></div>
      <div id="player1Bullet2"></div>
      <div id="player2Tank"></div>
      <div id="player2Bullet1"></div>
      <div id="player2Bullet2"></div>
      <div id="scores">
        <p>Player 1: <span id="player1Score">10</span></p>
        <p>Player 2: <span id="player2Score">10</span></p>
      </div>
    </div>
  </body>
</html> 
