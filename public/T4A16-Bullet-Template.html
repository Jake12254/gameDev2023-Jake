<html>
<head>
	<title>T4A06 Bullet by Fred</title>
	<style>
		body {
			background-repeat: repeat;
			background-size: 80%;
		}
	</style>
</head>
<body id="myBody" background="myBackground01.jpg" onkeydown="{
	document.all.myText01.value = event.key;

	if (event.key == 'd') {
		// d = go right
		document.getElementById('myImg01').style.left = parseInt(document.getElementById('myImg01').style.left) + 10 + 'px';
	}   

	if (event.key == 's') {
		// s = go down
		document.getElementById('myImg01').style.top = parseInt(document.getElementById('myImg01').style.top) + 10 + 'px';
	} 

    if (event.key == 'w') {
        // w = go up
        document.getElementById('myImg01').style.top = parseInt(document.getElementById('myImg01').style.top) - 10 + 'px';
    }

    if (event.key == 'a') {
        // a = go left
        document.getElementById('myImg01').style.left = parseInt(document.getElementById('myImg01').style.left) - 10 + 'px';
    }

	myCheckHit(); // checks for all collisions
}">

}">
	<h1 align=center><font color=Yellow>T4A06 Bullet by Fred</font></h1>
	<input id="myText01" type=text value="" size=50 placeholder="Feedback here"><br>
	<input type=button value="Auto Background Left" onclick="{
		clearInterval(myClock);
		let myTemp = '100px 0px';
		myClock = setInterval(function(){
			myGlobalX -= 5;
			myTemp =  myGlobalX + 'px 0px';
			document.getElementById('myBody').style.backgroundPosition = myTemp;
		}, 100);
	}">
	<input type=button value="Right" onclick="{
		document.getElementById('myImg01').style.left = parseInt(document.getElementById('myImg01').style.left) + 10 + 'px';
		myCheckHit(); // checks for all collisions
	}">
	<input type=button value="Down" onclick="{
		document.getElementById('myImg01').style.top = parseInt(document.getElementById('myImg01').style.top) + 10 + 'px';
		myCheckHit(); // checks for all collisions
	}">
	<input type=button value="shoot" onclick="{
		if (myShooting > 2) {
			myShooting = 1;
		}

		// Bullet Number 2
		if (myShooting == 2) {
			myShooting += 1;
			document.getElementById('myBullet02').style.left = document.getElementById('myImg01').style.left;
			document.getElementById('myBullet02').style.top = document.getElementById('myImg01').style.top;
			myGun02 = setInterval(function(){
				document.getElementById('myBullet02').style.left = parseInt(document.getElementById('myBullet02').style.left) + 10 + 'px';
				myCheckHit(); // checks for all collisions
				if (parseInt(document.getElementById('myBullet02').style.left) >= window.innerWidth) {
					clearInterval(myGun02);
						  }
			}, 50);
			}
						  	// Bullet Number 1
	if (myShooting == 1) {
		myShooting += 1;
		document.getElementById('myBullet01').style.left = document.getElementById('myImg01').style.left;
		document.getElementById('myBullet01').style.top = document.getElementById('myImg01').style.top;
		myGun01 = setInterval(function(){
			document.getElementById('myBullet01').style.left = parseInt(document.getElementById('myBullet01').style.left) + 10 + 'px';
			myCheckHit(); // checks for all collisions
			if (parseInt(document.getElementById('myBullet01').style.left) >= window.innerWidth) {
				clearInterval(myGun01);
			}
		}, 50);
	}
}">
<br><br>
<img id="myImg01" src="myCar01.png" style="position:absolute;left:50px;top:200px;width:120px;height:70px;">
<img id="myBullet01" src="myBullet01.png" style="position:absolute;left:-100px;top:-100px;width:40px;height:10px;">
<img id="myBullet02" src="myBullet02.png" style="position:absolute;left:-100px;top:-100px;width:40px;height:10px;">
<script>
	let myClock = setInterval(function(){
		myGlobalX -= 5;
		document.getElementById('myBody').style.backgroundPosition = myGlobalX + 'px 0px';
	}, 100);

	let myGlobalX = 0;
	let myShooting = 1;
	let myGun01 = null;
	let myGun02 = null;

	function myCheckHit() {
		let myCar = document.getElementById('myImg01');
		let myBullet01 = document.getElementById('myBullet01');
		let myBullet02 = document.getElementById('myBullet02');

		if (parseInt(myBullet01.style.left) > parseInt(myCar.style.left) &&
			parseInt(myBullet01.style.left) < parseInt(myCar.style.left) + 120 &&
			parseInt(myBullet01.style.top) > parseInt(myCar.style.top) &&
			parseInt(myBullet01.style.top) < parseInt(myCar.style.top) + 70) {
			myBullet01.style.left = '-100px';
			myBullet01.style.top = '-100px';
			alert('Collision with Bullet01');
		}

		if (parseInt(myBullet02.style.left) > parseInt(myCar.style.left) &&
			parseInt(myBullet02.style.left) < parseInt(myCar.style.left) + 120 &&
			parseInt(myBullet02.style.top) > parseInt(myCar.style.top) &&
			parseInt(myBullet02.style.top) < parseInt(myCar.style.top) + 70) {
			myBullet02.style.left = '-100px';
			myBullet02.style.top = '-100px';
			alert('Collision with Bullet02');
		}
	}
</script>
</body>
</html>
