<script> // Define the game board
const ROWS = 20;
const COLS = 10;
const board = [];

for (let i = 0; i < ROWS; i++) {
  board[i] = [];
  for (let j = 0; j < COLS; j++) {
    board[i][j] = 0;
  }
}

// Define the Tetromino shapes
const SHAPES = [
  [1, 1, 1, 1],  // I
  [1, 1, 0, 0,  // J
   1, 0, 0, 0],
  [1, 1, 0, 0,  // L
   0, 1, 0, 0],
  [1, 1, 0, 0,  // S
   0, 1, 1, 0],
  [0, 1, 1, 0,  // Z
   1, 1, 0, 0],
  [1, 1, 1, 0,  // T
   0, 1, 0, 0],
  [0, 0, 1, 0,  // O
   1, 1, 0, 0],
];

// Define the Tetromino colors
const COLORS = [
  "#00ffff",  // I
  "#0000ff",  // J
  "#ff8000",  // L
  "#00ff00",  // S
  "#ff0000",  // Z
  "#800080",  // T
  "#ffff00",  // O
];

// Define the Tetromino class
class Tetromino {
  constructor(shape, color) {
    this.shape = shape;
    this.color = color;
    this.row = 0;
    this.col = Math.floor(COLS / 2) - Math.floor(shape.length / 2);
  }

  moveDown() {
    this.row++;
  }

  moveLeft() {
    this.col--;
  }

  moveRight() {
    this.col++;
  }

  rotate() {
    const rotated = [];

    for (let i = 0; i < this.shape.length; i++) {
      rotated[i] = [];

      for (let j = 0; j < this.shape.length; j++) {
        rotated[i][j] = this.shape[this.shape.length - j - 1][i];
      }
    }

    this.shape = rotated;
  }

  draw() {
    for (let i = 0; i < this.shape.length; i++) {
      for (let j = 0; j < this.shape.length; j++) {
        if (this.shape[i][j]) {
          const r = this.row + i;
          const c = this.col + j;

          if (r >= 0 && r < ROWS && c >= 0 && c < COLS) {
            board[r][c] = this.color;
          }
        }
      }
    }
  }

  undraw() {
    for (let i = 0; i < this.shape.length; i++) {
      for (let j = 0; j < this.shape.length; j++) {
        if (this.shape[i][j]) {
          const r = this.row + i;
          const c = this.col + j;

        if (board[r][c] === 0) {
  board[r][c] = 0;
}

      }
    }
  }

  isColliding() {
    for (let i = 0; i < this.shape.length; i++) {
      for (let j = 0; j < this.shape.length; j++) {
        if (this.shape[i][j]) {
          const r = this.row + i;
          const c = this.col + j;

          if (r >= ROWS || c < 0 || c >= COLS || board[r][c]) {
            return true;
          }
        }
      }
    }

    return false;
  }

  isGameOver() {
    return this.row === 0 && this.isColliding();
  }
}

// Define the game loop
let tetromino = null;
let interval = null;
let score = 0;

function startGame() {
  tetromino = new Tetromino(
    SHAPES[Math.floor(Math.random() * SHAPES.length)],
    COLORS[Math.floor(Math.random() * COLORS.length)]
  );
  score = 0;
  interval = setInterval(gameLoop, 500);
}

function gameLoop() {
  tetromino.undraw();
  tetromino.moveDown();

  if (tetromino.isColliding()) {
    tetromino.moveUp();
    tetromino.draw();
	  tetromino.moveUp();

    for (let i = 0; i < ROWS; i++) {
      if (board[i].every(cell => cell)) {
        board.splice(i, 1);
        board.unshift(new Array(COLS).fill(0));
        score += 10;
      }
    }

    if (tetromino.isGameOver()) {
      clearInterval(interval);
      alert(`Game Over! Score: ${score}`);
      return;
    }

    tetromino = new Tetromino(
      SHAPES[Math.floor(Math.random() * SHAPES.length)],
      COLORS[Math.floor(Math.random() * COLORS.length)]
    );
  }

  tetromino.draw();
}

// Start the game
startGame();
		  </script>

	
