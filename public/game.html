<!DOCTYPE html>
<html>
<head>
	<title>Pong Game</title>
	<style>
		canvas {
			border: 2px solid black;
		}
	</style>
</head>
<body>
	<canvas id="canvas" width="600" height="400"></canvas>

	<script>
		// Game variables
		let canvas = document.getElementById("canvas");
		let ctx = canvas.getContext("2d");
		let ballX = canvas.width / 2;
		let ballY = canvas.height / 2;
		let ballSpeedX = 5;
		let ballSpeedY = 5;
		let paddle1Y = canvas.height / 2 - 50;
		let paddle2Y = canvas.height / 2 - 50;
		let paddleHeight = 100;
		let paddleWidth = 10;
		let player1Score = 0;
		let player2Score = 0;
		let winningScore = 3;
		let gameOver = false;

		// Mouse and Keyboard event listeners
		canvas.addEventListener("mousemove", function(event) {
			let mousePos = calculateMousePos(event);
			paddle1Y = mousePos.y - paddleHeight / 2;
		});

		window.addEventListener("keydown", function(event) {
			switch(event.keyCode) {
				case 38:
					paddle2Y -= 20;
					break;
				case 40:
					paddle2Y += 20;
					break;
			}
		});

		// Helper function to calculate mouse position
		function calculateMousePos(event) {
			let rect = canvas.getBoundingClientRect();
			let root = document.documentElement;
			let mouseX = event.clientX - rect.left - root.scrollLeft;
			let mouseY = event.clientY - rect.top - root.scrollTop;
			return {
				x: mouseX,
				y: mouseY
			};
		}

		// Helper function to reset ball position
		function ballReset() {
			if (player1Score >= winningScore || player2Score >= winningScore) {
				gameOver = true;
			}

			ballSpeedX = -ballSpeedX;
			ballX = canvas.width / 2;
			ballY = canvas.height / 2;
		}

		// Helper function to draw net on canvas
		function drawNet() {
			for (let i = 0; i < canvas.height; i += 40) {
				drawRect(canvas.width / 2 - 1, i, 2, 20, "white");
			}
		}

		// Helper function to draw rectangles
		function drawRect(leftX, topY, width, height, color) {
			ctx.fillStyle = color;
			ctx.fillRect(leftX, topY, width, height);
		}

		// Helper function to draw circles
		function drawCircle(centerX, centerY, radius, color) {
			ctx.fillStyle = color;
			ctx.beginPath();
			ctx.arc(centerX, centerY, radius, 0, Math.PI * 2, true);
			ctx.fill();
		}

		// Helper function to draw text
		function drawText(text, leftX, topY, color) {
			ctx.fillStyle = color;
			ctx.fillText(text, leftX, topY);
		}

		// Main game loop
		function draw() {
			// Clear canvas
			drawRect(0, 0, canvas.width, canvas.height, "black");

			// Draw net
			drawNet();

			function drawPaddles() {
  // draw player 1 paddle
  ctx.fillStyle = 'white';
  ctx.fillRect(paddle1.x, paddle1.y, paddle1.width, paddle1.height);
  
  // draw player 2 paddle
  ctx.fillStyle = 'white';
  ctx.fillRect(paddle2.x, paddle2.y, paddle2.width, paddle2.height);
}

         function movePaddles() {
  // move player 1 paddle
  if (keys['ArrowUp']) {
    paddle1.y -= paddleSpeed;
  } else if (keys['ArrowDown']) {
    paddle1.y += paddleSpeed;
  }
  
  // move player 2 paddle
  if (keys['w']) {
    paddle2.y -= paddleSpeed;
  } else if (keys['s']) {
    paddle2.y += paddleSpeed;
  }
  
  // prevent paddles from going out of bounds
  if (paddle1.y < 0) {
    paddle1.y = 0;
  } else if (paddle1.y + paddle1.height > canvas.height) {
    paddle1.y = canvas.height - paddle1.height;
  }
  
  if (paddle2.y < 0) {
    paddle2.y = 0;
  } else if (paddle2.y + paddle2.height > canvas.height) {
    paddle2.y = canvas.height - paddle2.height;
  }
}

